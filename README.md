# Описание тестового задания

## Вводные данные

### Конфигурация:
- **PHP**: 8.0
- **MySQL**: 8
- **NGINX**

[Исходные данные на GitHub Gist](https://gist.github.com/f1uder/91f428ceedcc7ea8ef66a71b2128b9f7)

---

## Задание:
Создать REST API для управления пользователями с использованием фреймворка Laravel.

---

### Требования:
1. Реализовать REST API с возможностью:
   - Получения списка пользователей с пагинацией.
   - Получения информации об отдельном пользователе по ID.
   - Создания нового пользователя.
   - Обновления данных существующего пользователя (поля: `name`, `ip`, `comment`, `password`).
   - Удаления пользователя.

2. **Модель пользователя**:
   - Расширить стандартную модель полями:
      - `ip` (тип `string`, nullable) — комментарий: "IP-адрес пользователя".
      - `comment` (тип `text`, nullable) — комментарий: "Комментарий к пользователю".

3. **Обязательные компоненты**:
   - **Миграция** для создания таблицы `users` с указанными полями.
   - **Сидер** для заполнения таблицы тестовыми данными (50 записей).
   - **Ресурсный контроллер** для обработки всех маршрутов.
   - Обработка ошибок:
      - При запросе несуществующего пользователя возвращать статус `404` и соответствующее сообщение.
   - Возврат JSON-ответов с унифицированной структурой:
     ```json
     {
         "status": "success",
         "data": { /* данные или массив данных */ },
         "message": null
     }
     ```

4. **Плюсом будет**:
   - Возможность поиска по имени при запросе списка пользователей.
   - Возможность сортировки по имени (по возрастанию/убыванию).
   - Валидация входных данных (Laravel Validation Rules).

---

### Тесты:
- Написать **Feature-тесты** для проверки работы каждого из маршрутов:
   - `GET /users` — Проверка получения списка пользователей.
   - `GET /users/{id}` — Проверка получения данных пользователя.
   - `POST /users` — Проверка создания нового пользователя.
   - `PUT /users/{id}` — Проверка обновления данных пользователя.
   - `DELETE /users/{id}` — Проверка удаления пользователя.

---

## Инструкции по развертыванию через Docker:

1. Склонируйте репозиторий:
   ```bash
   git clone https://github.com/dushesss45/user-management.git
   cd user-management
   ```

2. Запустите Docker-контейнеры:
   ```bash
   docker-compose up -d --build
   ```

3. Выполните миграции и заполните базу данных тестовыми данными:
   ```bash
   docker exec -it laravel-app php artisan migrate --seed
   ```

4. API будет доступно по адресу:
   ```plaintext
   http://localhost:8080
   ```

---

### Тестирование:

Для запуска тестов выполните команду:
```bash
docker exec -it laravel-app php artisan test
```

---

## Инструкции по Swagger:
1. Документация API сгенерирована в `swagger.yaml`.
2. Открыть документацию можно по адресу:
   ```plaintext
   http://localhost:8080/api-docs
   ```

---

## Ожидаемый результат:
- Репозиторий на GitHub с выполненным тестовым заданием.
- Инструкции для запуска и тестирования.
- Полностью функционирующее REST API.
- Пройденные тесты, подтверждающие работоспособность.

---

## Пример структуры проекта:

```plaintext
.
├── app/
│   ├── Http/
│   │   ├── Controllers/
│   │   │   └── UserController.php
│   │   └── Middleware/
│   ├── Models/
│   │   └── User.php
│   ├── Services/
│       └── UserService.php
├── database/
│   ├── factories/
│   │   └── UserFactory.php
│   ├── migrations/
│   │   └── 2024_12_27_000000_create_users_table.php
│   ├── seeders/
│       └── UserSeeder.php
├── public/
│   └── swagger/
│       ├── index.html
│       └── swagger.yaml
├── tests/
│   ├── Feature/
│   │   └── UserControllerTest.php
│   └── Unit/
│       └── ExampleTest.php
├── docker-compose.yml
├── .env
└── README.md
```

---

## Затраченное время:
~6 часов, из них 1 час на развертывание проекта, 2 часа написание кода, 1 час отладки, 2 часа документация